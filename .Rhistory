download.file("https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2",
"a", method = "libcurl")
download.file("https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2",
"StormData.csv.bz2", method = "libcurl")
unzip("StormData.csv.bz2",exdir = "data")
unzip("StormData.csv.bz2")
data<-read.csv("StormData.csv.bz2", header = TRUE, sep = ",", quote = "\"",...)
data<-read.csv("StormData.csv.bz2", header = TRUE, sep = ",")
names(data)
data
head(data)
names(data)
data$BGN_DATE
class(data$BGN_DATE)
library(lubridate)
mdy(data$BGN_DATE)
as_date(data$BGN_DATE)
as.character(data$BGN_DATE)
mdy_hms(as.character(data$BGN_DATE))
names(data)
data$BGN_DATE<-mdy_hms(as.character(data$BGN_DATE))
names(data)
head(data)
hms(as.character(data$BGN_DATE))
head(data)
View(data)
## Transformar datos
summary(data)
head(data)
data$END_DATE
mdy_hms(as.character(data$END_DATE))
data$END_DATE
mdy_hms(as.character(data$END_DATE))
library(tidyverse)
mdy_hms(as.character(data$END_DATE)) %>% arrange()
a<-mdy_hms(as.character(data$END_DATE))
table(a)
data$END_DATE<-mdy_hms(as.character(data$END_DATE))
hms(data$BGN_TIME)
a<-hms(data$BGN_TIME)
table(a)
## Preguntas
#* Does the analysis address the question of which types of events are most harmful to population health?
data %>% group_by(EVTYPE) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES))
## Preguntas
#* Does the analysis address the question of which types of events are most harmful to population health?
data %>% group_by(EVTYPE) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES)) %>% arrange(FATALITIES)
## Preguntas
#* Does the analysis address the question of which types of events are most harmful to population health?
data %>% group_by(EVTYPE) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES)) %>% arrange(-FATALITIES)
data %>% filter(EVTYPE %in% c("TORNADO","EXCESSIVE HEAT","FLASH FLOOD","HEAT","LIGHTNING","TSTM WIND")) %>%
group_by(EVTYPE) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES)) %>% arrange(-FATALITIES)
year(data$BGN_DATE)
date$BGN_YEAR<-year(data$BGN_DATE)
date$BGN_YEAR
year(data$BGN_DATE)
data$BGN_YEAR<-year(data$BGN_DATE)
data %>% filter(EVTYPE %in% c("TORNADO","EXCESSIVE HEAT","FLASH FLOOD","HEAT","LIGHTNING","TSTM WIND")) %>%
group_by(EVTYPE,BGN_YEAR)
data %>% filter(EVTYPE %in% c("TORNADO","EXCESSIVE HEAT","FLASH FLOOD","HEAT","LIGHTNING","TSTM WIND")) %>%
group_by(EVTYPE,BGN_YEAR) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES)) %>% arrange(-FATALITIES)
data %>% filter(EVTYPE %in% c("TORNADO","EXCESSIVE HEAT","FLASH FLOOD","HEAT","LIGHTNING","TSTM WIND")) %>%
group_by(EVTYPE,BGN_YEAR) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES)) %>% arrange(-FATALITIES) %>%
ggplot(aes( x = BGN_YEAR, y =FATALITIES, fill = EVTYPE, color = EVTYPE)) +
geom_line()
data %>% filter(EVTYPE %in% c("TORNADO","EXCESSIVE HEAT","FLASH FLOOD","HEAT","LIGHTNING","TSTM WIND")) %>%
group_by(EVTYPE,BGN_YEAR) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES)) %>% arrange(-FATALITIES) %>%
gather(FI)
data %>% filter(EVTYPE %in% c("TORNADO","EXCESSIVE HEAT","FLASH FLOOD","HEAT","LIGHTNING","TSTM WIND")) %>%
group_by(EVTYPE,BGN_YEAR) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES)) %>% arrange(-FATALITIES) %>%
gather(FI,-EVTYPE)
data %>% filter(EVTYPE %in% c("TORNADO","EXCESSIVE HEAT","FLASH FLOOD","HEAT","LIGHTNING","TSTM WIND")) %>%
group_by(EVTYPE,BGN_YEAR) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES)) %>% arrange(-FATALITIES) %>%
gather(FI,-EVTYPE)
data %>% filter(EVTYPE %in% c("TORNADO","EXCESSIVE HEAT","FLASH FLOOD","HEAT","LIGHTNING","TSTM WIND")) %>%
group_by(EVTYPE,BGN_YEAR) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES)) %>% arrange(-FATALITIES) %>%
gather(FI,-BGN_YEAR)
data %>% filter(EVTYPE %in% c("TORNADO","EXCESSIVE HEAT","FLASH FLOOD","HEAT","LIGHTNING","TSTM WIND")) %>%
group_by(EVTYPE,BGN_YEAR) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES)) %>% arrange(-FATALITIES) %>%
gather(key = "indices", value = "valor", -EVTYPE,-BGN_YEAR)
data %>% filter(EVTYPE %in% c("TORNADO","EXCESSIVE HEAT","FLASH FLOOD","HEAT","LIGHTNING","TSTM WIND")) %>%
group_by(EVTYPE,BGN_YEAR) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES)) %>% arrange(-FATALITIES) %>%
gather(key = "type", value = "value", -EVTYPE,-BGN_YEAR)
data %>% filter(EVTYPE %in% c("TORNADO","EXCESSIVE HEAT","FLASH FLOOD","HEAT","LIGHTNING","TSTM WIND")) %>%
group_by(EVTYPE,BGN_YEAR) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES)) %>% arrange(-FATALITIES) %>%
gather(key = "type", value = "value", -EVTYPE,-BGN_YEAR) %>%
ggplot(aes( x = BGN_YEAR, y =value, fill = type, color = type)) +
geom_line() + theme_bw()
data %>% filter(EVTYPE %in% c("TORNADO","EXCESSIVE HEAT","FLASH FLOOD","HEAT","LIGHTNING","TSTM WIND")) %>%
group_by(EVTYPE,BGN_YEAR) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES)) %>% arrange(-FATALITIES) %>%
gather(key = "type", value = "value", -EVTYPE,-BGN_YEAR) %>%
ggplot(aes( x = BGN_YEAR, y =value, fill = type, color = type)) + facet_wrap(~EVTYPE) +
geom_line() + theme_bw() +
labs(x="Year",
y = "FATALITIES AND INJURIES",
caption = "Fuente: INE") +
theme(legend.position = "bottom")
## Preguntas
#* Does the analysis address the question of which types of events are most harmful to population health?
data %>% group_by(EVTYPE) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES)) %>% arrange(-FATALITIES)
data %>% filter(EVTYPE %in% c("TORNADO","EXCESSIVE HEAT","FLASH FLOOD","HEAT","LIGHTNING","TSTM WIND")) %>%
group_by(EVTYPE,BGN_YEAR) %>% summarise(FATALITIES=sum(FATALITIES),
INJURIES=sum(INJURIES)) %>% arrange(-FATALITIES) %>%
gather(key = "type", value = "value", -EVTYPE,-BGN_YEAR) %>%
ggplot(aes( x = BGN_YEAR, y =value, fill = type, color = type)) + facet_wrap(~EVTYPE) +
geom_line() + theme_bw() +
labs(x="Year",
y = "FATALITIES AND INJURIES",
caption = "National Climatic Data Center Storm Events") +
theme(legend.position = "bottom")
